# UU MEMO 本站操作說明手冊 (Operation Guide)

歡迎使用您全新的 UU MEMO 動態運作架構。這份文件將說明目前網站的各項可用功能、精選文章的邏輯，以及建議的日常工作流程。

---

## 1. 目前系統功能與可用性 (Availability)

本站已完成「全能中繼站 (Unified Bridge)」架構升級，目前具備以下核心能力：

### 🛠️ 後台管理工具 (Admin Panel)
*   **草稿生成工具 (Draft Prompt Generator)**：
    *   提供多階段問答，協助您快速生成高品質的 Markdown 文章草稿。
    *   **新增 Slug 欄位**：請在此輸入文章短網址，系統會自動生成對應的 `heroImage` 路徑，確保圖片與文章完美匹配。
*   **影像處理隊列 (Image Queue)**：
    *   支援批次上傳圖片。上傳時系統會自動執行智慧裁切與壓縮（橫式 1200x630, 其他等比縮放），節省儲存空間與讀取速度。
*   **單次 Commit 批次同步 (Batch Sync)**：
    *   **核心功能**：按下「同步至 GitHub」時，系統會將文章 Markdown 與所有上傳的圖片壓縮成「一次提交」。
    *   **優點**：GitHub 只會觸發一次 Build 任務，大幅縮短部署時間，並保持 Git 紀錄乾淨。
*   **緊急修復工具 (Emergency Fix)**：
    *   位於「系統設定」分頁，可一鍵強制刪除 GitHub 遠端可能造成建置錯誤的檔案（如空的 `test.md`）。

### 📡 中繼站功能 (GAS Bridge)
*   **自動雲端備份 (Auto Drive Backup)**：每次同步到 GitHub 的同時，文章與圖片會自動備份到您的 Google Drive `UU-Memo-Archive` 資料夾。
*   **聯絡表單整合**：網站前端的聯絡表單透過同一支 GAS 腳本進行發信，安全性由 Token 保護。

### 🏠 前端顯示 (Frontend)
*   **全面動態化**：首頁「最新文章」、「精選文章」、「側邊欄分類」與「熱門標籤」均由程式自動分析您的 `posts` 資料夾產出，無需手動修改 HTML代碼。

---

## 2. 精選文章 (Featured Posts) 設定邏輯

目前本站採用 **「標籤法 (Tag-based)」** 來決定哪些文章要上首頁精選：

*   **設定方式**：在文章的標籤 (`tags`) 中加入 **`精選`** 標籤。
*   **顯示規則**：首頁「精選文章」區塊會抓取所有含有此標籤的文章，並按日期排序，最多顯示 **4 篇**。
*   **優勢**：您無需修改任何程式碼，只要修改 Markdown 中的標籤即可隨時調整首頁內容。

---

## 3. 未來建议工作流程 (Future Workflow)

為了確保網站穩定運作，建議您遵循以下發文流程：

### 第一步：內容發想與草稿
1.  進入管理後台的「**草稿工具**」。
2.  輸入 **文章短網址 (Slug)**（重要：這決定了圖片的存放路徑與 URL）。
3.  填寫分類與標籤（若要設為精選，請加入 `精選` 標籤）。
4.  複製 Prompt 到您的 AI 助理生成完整文章。

### 第二步：文章校對與圖片上傳
1.  將生成的 Markdown 貼入編輯器。
2.  在「**圖片隊列**」中上傳該文章所需的配圖。
3.  系統會自動將第一張圖對應為 `YYMM-slug-01.jpg`。

### 第三步：發布同步
1.  確認無誤後，點擊「**同步至 GitHub**」。
2.  觀察按鈕狀態直到變為「同步成功」。

### 第四步：自動建置與驗證
1.  GitHub Actions 會自動開始執行 (約需 1-2 分鐘)。
2.  同步完成後，您可以到 Google Drive 確認備份是否成功。
3.  重新整理首頁，確認「最新文章」與「精選文章」已正確更新。

---

## 4. 維護與故障排除

*   **建置失敗報警**：若 GitHub Actions 持續報錯，通常是因為某篇文章的 Frontmatter 加錯（例如遺漏 `title`）。
*   **使用緊急工具**：若確定是某個檔案出錯，請使用後台的「緊急修復」按鈕。
*   **GAS 腳本更新**：若未來功能有大型更動，請記得同步更新 Google Apps Script 的代碼並重新部署。

---
*本手冊最後更新於：2026-03-02*
